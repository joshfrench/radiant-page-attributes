%tr
  %th.label
    %label{:for => "page_attribute_#{page_attribute_row_counter}"}
      = page_attribute_row.name
      %small.info
        = "(#{page_attribute_row.class.display_name})"
      - fields_for "page[build_page_attributes][#{page_attribute_row_counter}]" do |attribute|
        = attribute.hidden_field :class_name, :value => page_attribute_row.class_name
        = attribute.hidden_field :name, :value => page_attribute_row.name
  %td.field
    - fields_for "page[build_page_attributes][#{page_attribute_row_counter}]" do |attribute|
      = render :partial => "/admin/page_attributes/#{page_attribute_row.class.partial_name}", :locals => { :attribute => attribute, :page_attribute => page_attribute_row, :page_attribute_row_counter => page_attribute_row_counter }
    - page_attribute_row_counter += 1
    = link_to_function image('minus', :alt => 'minus'), 'if(confirm(\'Delete this attribute?\')) { alert("TODO: Implement deletion.") }', :title => 'Remove Attribute'
  